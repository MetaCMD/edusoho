(window.webpackJsonp=window.webpackJsonp||[]).push([[387],{1372:function(e,t,a){},1373:function(e,t,a){"use strict";var s={props:{user:{type:Object,default:{}}},computed:{getUserRoles:function(){return _.join(this.user.user.roles," ")}},methods:{toPersonalHomepage:function(e){window.open("/user/"+e+"/about","_blank")},formatTimeIp:function(e,t){var a="";return a+=0!=e?this.$dateFormat(e,"YYYY-MM-DD HH:mm"):" -- ",""!=t&&(a+=" / "+t+" 本机IP"),a},formatStr:function(e){return void 0===e||""==e||null==e?"暂无":e},formatGender:function(){return{male:"男性",female:"女性",secret:"秘密"}[this.user.profile.gender]}}},r=a(29),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"table table-striped table-condenseda table-bordered"},[a("tbody",[a("tr",[a("th",{attrs:{width:"30%"}},[e._v("用户名")]),e._v(" "),a("td",{attrs:{width:"70%"}},[a("a",{staticClass:"pull-right",attrs:{href:"javascript:;"},on:{click:function(t){return e.toPersonalHomepage(e.user.user.id)}}},[e._v("个人主页")]),e._v("\n        "+e._s(e.user.user.nickname)+"\n      ")])]),e._v(" "),a("tr",[a("th",[e._v("Email")]),e._v(" "),a("td",[e._v(e._s(e.user.profile.email||"- -"))])]),e._v(" "),a("tr",[a("th",[e._v("用户组")]),e._v(" "),a("td",[e._v(e._s(e.getUserRoles))])]),e._v(" "),a("tr",[a("th",[e._v("注册时间/IP")]),e._v(" "),a("td",[e._v(e._s(e.formatTimeIp(e.user.user.createdTime,e.user.user.createdIp)))])]),e._v(" "),a("tr",[a("th",[e._v("最近登录时间/IP")]),e._v(" "),a("td",[e._v(e._s(e.formatTimeIp(e.user.user.loginTime,e.user.user.loginIp)))])]),e._v(" "),a("tr",[a("th",[e._v("姓名")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.truename)))])]),e._v(" "),a("tr",[a("th",[e._v("性别")]),e._v(" "),a("td",[e._v(e._s(e.formatGender()))])]),e._v(" "),a("tr",[a("th",[e._v("身份证号")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.idcard)))])]),e._v(" "),a("tr",[a("th",[e._v("手机号码")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.mobile)))])]),e._v(" "),a("tr",[a("th",[e._v("公司")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.company)))])]),e._v(" "),a("tr",[a("th",[e._v("职业")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.job)))])]),e._v(" "),a("tr",[a("th",[e._v("头衔")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.user.title)))])]),e._v(" "),a("tr",[a("th",[e._v("个人签名")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.signature)))])]),e._v(" "),a("tr",[a("th",[e._v("自我介绍")]),e._v(" "),a("td",{domProps:{innerHTML:e._s(e.user.profile.about||"暂无")}})]),e._v(" "),a("tr",[a("th",[e._v("个人网站")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.site)))])]),e._v(" "),a("tr",[a("th",[e._v("微博")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.weibo)))])]),e._v(" "),a("tr",[a("th",[e._v("微信")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.weixin)))])]),e._v(" "),a("tr",[a("th",[e._v("QQ")]),e._v(" "),a("td",[e._v(e._s(e.formatStr(e.user.profile.qq)))])])])])}),[],!1,null,null,null);t.a=n.exports},1374:function(e,t,a){"use strict";var s=a(65),r=a.n(s),n={name:"Assistant",props:{assistant:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{ellipsis:!1}},computed:{assistants:function(){if(!r.a.size(this.assistant))return"- -";var e=[];return r.a.forEach(this.assistant,(function(t,a){t.nickname?e.push(t.nickname):e.push(t)})),r.a.join(e,"、")}},mounted:function(){var e=this.$refs.assistant;this.ellipsis=e.scrollWidth>e.clientWidth}},i=(a(1380),a(29)),o=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"assistant",class:[e.ellipsis?"assistant":"","text-overflow"]},[e._v("\n  "+e._s(e.assistants)+"\n\n  "),e.ellipsis?a("a-tooltip",{staticClass:"assistant-all",attrs:{placement:"bottom"}},[a("template",{slot:"title"},[a("span",[e._v(e._s(e.assistants))])]),e._v(" "),a("svg-icon",{staticStyle:{color:"#979797"},attrs:{icon:"icon-more"}})],2):e._e()],1)}),[],!1,null,"7274aa3a",null);t.a=o.exports},1380:function(e,t,a){"use strict";var s=a(1372);a.n(s).a},1384:function(e,t,a){},1386:function(e,t,a){},1387:function(e,t,a){},1388:function(e,t,a){},1389:function(e,t,a){},1393:function(e,t,a){"use strict";var s={name:"ClassName",props:{record:{type:Object,required:!0,default:function(){return{}}}},computed:{className:function(){var e=this.record,t=e.chapterTitle,a=e.unitTitle,s=e.number,r=e.title,n=e.tasks,i="";if("lesson"===n.mode)i="".concat(s,". ").concat(r);else{var o=n.number.split("-");i="".concat(s,".").concat(o[1]-1," [任务]").concat(n.title)}return a&&(i="".concat(a," ").concat(i)),t&&(i=a?"".concat(t," - ").concat(i):"".concat(t," ").concat(i)),i}}},r=a(29),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-overflow"},[a("span",{attrs:{title:e.className}},[e._v(e._s(e.className))]),e._v(" "),a("br"),e._v(" "),"published"!=e.record.tasks.status?a("a-tag",{staticStyle:{"margin-top":"4px"}},[e._v("未发布")]):e._e()],1)}),[],!1,null,null,null);t.a=n.exports},1404:function(e,t,a){"use strict";var s=a(1384);a.n(s).a},1406:function(e,t,a){"use strict";var s=a(1386);a.n(s).a},1407:function(e,t,a){"use strict";var s=a(1387);a.n(s).a},1408:function(e,t,a){"use strict";var s=a(1388);a.n(s).a},1409:function(e,t,a){"use strict";var s=a(1389);a.n(s).a},911:function(e,t,a){"use strict";a.r(t);var s=a(127),r=a.n(s),n=a(104),i=a.n(n),o=a(78),l=a.n(o),u=a(71),c=a.n(u),d=a(79),m=a.n(d),p=a(45),f=a.n(p),v=a(37),h=a.n(v),g=a(28),_=a.n(g),b=a(14),k=a.n(b),y=a(42),w=a.n(y),S=a(16),x=a.n(S),C=a(65),T=a.n(C),I=a(536),R={props:{visible:{type:Boolean,required:!0,default:!1},multiClass:{type:Object,required:!0,default:{}}},data:function(){return{form:this.$form.createForm(this,{name:"add_student"})}},methods:{handleCancel:function(){this.$emit("handle-cancel")},handleSubmit:function(){var e=this;return w()(_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.form.validateFields((function(t,a){t||I.k.add({id:e.multiClass.id,userInfo:a.name,price:a.price,remark:a.remark}).then((function(t){e.$message.success("学员创建成功！",2),e.visible=!1,window.location.reload()})).catch((function(t){e.$message.warning("学员创建失败",2)}))}));case 1:case"end":return t.stop()}}),t)})))()},validatorName:T.a.debounce(function(){var e=w()(_.a.mark((function e(t,a,s){var r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.p.search({type:"multiClassProduct",title:a});case 2:if(r=e.sent,r.result){e.next=7;break}return this.form.setFields({title:{value:a,errors:[new Error("产品名称不能与已创建的相同")]}}),e.abrupt("return");case 7:s();case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,s){return e.apply(this,arguments)}}(),300),validatorPrice:function(e,t,a){/^[0-9]{0,8}(\.\d{0,2})?$/.test(t)?a():a(new Error(Translator.trans("validate.positive_currency.message")))},maxPrice:function(e,t,a){x()(t)>this.multiClass.course.price?a(new Error(Translator.trans("course_manage.student_create.price_max_error_hint"))):a()}}},M=a(29),$=Object(M.a)(R,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"添加学员",visible:e.visible},on:{cancel:e.handleCancel}},[a("a-form",{attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:20}}},[a("a-form-item",{attrs:{label:"学员",extra:"只能添加系统中已经注册的用户"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入学员"},{validator:e.validatorName}]}],expression:"['name', { rules: [\n          { required: true, message: '请输入学员' },\n          { validator: validatorName }\n        ]}]"}],attrs:{placeholder:"邮箱／手机／用户名"}})],1),e._v(" "),e.multiClass.course.price?a("a-form-item",{attrs:{label:"购买价格",extra:"本课程的价格为 "+e.multiClass.course.price+" 元"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:e.multiClass.course.price,rules:[{validator:e.validatorPrice},{validator:e.maxPrice}]}],expression:"['price',\n        {\n          initialValue: multiClass.course.price,\n          rules: [\n            { validator: validatorPrice },\n            { validator: maxPrice }\n          ]\n        }]"}],attrs:{type:"text",suffix:"元"}})],1):e._e(),e._v(" "),a("a-form-item",{attrs:{label:"备注",extra:"选填"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}]})],1)],1),e._v(" "),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n      取消\n    ")]),e._v(" "),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n      确认\n    ")])],1)],2)}),[],!1,null,null,null).exports,P={props:{visible:{type:Boolean,required:!0,default:!1}},methods:{handleCancel:function(){this.$emit("handle-cancel")}}},E=Object(M.a)(P,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"学员信息",visible:e.visible,footer:null},on:{cancel:e.handleCancel}},[a("a-descriptions",{attrs:{bordered:"",column:1}},[a("a-descriptions-item",{attrs:{label:"用户名"}},[e._v("\n      Zhou Maomao\n    ")]),e._v(" "),a("a-descriptions-item",{attrs:{label:"Email"}},[e._v("\n      1810000000\n    ")]),e._v(" "),a("a-descriptions-item",{attrs:{label:"用户组"}},[e._v("\n      Hangzhou, Zhejiang\n    ")]),e._v(" "),a("a-descriptions-item",{attrs:{label:"用户名"}},[e._v("\n      Zhou Maomao\n    ")]),e._v(" "),a("a-descriptions-item",{attrs:{label:"Email"}},[e._v("\n      1810000000\n    ")]),e._v(" "),a("a-descriptions-item",{attrs:{label:"用户组"}},[e._v("\n      Hangzhou, Zhejiang\n    ")]),e._v(" "),a("a-descriptions-item",{attrs:{label:"Address"}},[e._v("\n      No. 18, Wantang Road, Xihu District, Hangzhou, Zhejiang, China\n    ")]),e._v(" "),a("a-descriptions-item",{attrs:{label:"Remark"}},[e._v("\n      empty\n    ")])],1)],1)}),[],!1,null,null,null).exports,V=a(1373),H=a(1374);function L(e,t){var a=f()(e);if(m.a){var s=m()(e);t&&(s=s.filter((function(t){return c()(e,t).enumerable}))),a.push.apply(a,s)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):l.a?i()(e,l()(a)):L(Object(a)).forEach((function(t){r()(e,t,c()(a,t))}))}return e}var z=[{title:"学员",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"手机号",dataIndex:"phone",scopedSlots:{customRender:"phone"}},{title:"学习进度",dataIndex:"learningProgressPercent",scopedSlots:{customRender:"learningProgressPercent"}},{title:"助教老师",dataIndex:"assistants",width:"10%",ellipsis:!0,scopedSlots:{customRender:"assistants"}},{title:"提问",dataIndex:"threadCount",scopedSlots:{customRender:"threadCount"}},{title:"作业提交",dataIndex:"finishedHomeworkCount",scopedSlots:{customRender:"finishedHomeworkCount"}},{title:"试卷提交",dataIndex:"finishedTestpaperCount",scopedSlots:{customRender:"finishedTestpaperCount"}},{title:"有效期",dataIndex:"deadline",scopedSlots:{customRender:"deadline"}},{title:"报名时间",dataIndex:"createdTime",scopedSlots:{customRender:"createdTime"}},{title:"操作",dataIndex:"actions",scopedSlots:{customRender:"actions"}}],U=[{title:"课时",dataIndex:"activity",scopedSlots:{customRender:"lesson"},width:"15%",ellipsis:!0},{title:"作业/考试",dataIndex:"answerScene",scopedSlots:{customRender:"exam"},width:"15%",ellipsis:!0},{title:"提交时间",dataIndex:"end_time",scopedSlots:{customRender:"end_time"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"批阅人",dataIndex:"teacherInfo",scopedSlots:{customRender:"teacherInfo"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],q={all:{total:0,offset:0,pageSize:10},reviewing:{total:0,offset:0,pageSize:10},doing:{total:0,offset:0,pageSize:10},finished:{total:0,offset:0,pageSize:10}},D={components:{AddStudentModal:$,StudentInfoModal:E,userInfoTable:V.a,Assistant:H.a},data:function(){return{resultColumns:U,students:[],modalShowUser:{},selectedUser:{},multiClass:{course:{id:0}},columns:z,selectedRowKeys:[],selectedRowKeysStr:"",selectedUserIds:[],loading:!1,addStudentVisible:!1,viewStudentInfoVisible:!1,id:this.$route.params.id,getListLoading:!1,keyword:"",paging:{total:0,offset:0,pageSize:10},testpaperPaging:q,homeworkPaging:q,status:["all","reviewing","doing","finished"],statusMap:{doing:"进行中",paused:"暂停",reviewing:"未批阅",finished:"已批阅"},gradeMap:{excellent:"优秀",good:"良好",passed:"合格",unpassed:"不合格"},homeworkResultList:{type:Object,required:!0,default:{}},testpaperResultList:{type:Object,required:!0,default:{}},currentHomeworkTab:0,currentTestpaperTab:0,homeworkModalVisible:!1,testpaperModalVisible:!1}},computed:{hasSelected:function(){return this.selectedRowKeys.length>0},testpaperResults:function(){var e=this.status[this.currentTestpaperTab];return this.testpaperResultList[e]},homeworkResults:function(){var e=this.status[this.currentHomeworkTab];return this.homeworkResultList[e]}},watch:{currentTestpaperTab:function(e){this.getTestpaperResults(e)},currentHomeworkTab:function(e){this.getHomeworkResults(e)}},created:function(){this.getMultiClassStudents(),this.getMultiClass()},befeoreRouteUpdate:function(e,t,a){this.id=e.params.id,a()},methods:{getMultiClassStudents:function(){var e=arguments,t=this;return w()(_.a.mark((function a(){var s,r,n,i;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=e.length>0&&void 0!==e[0]?e[0]:{},a.next=3,I.k.search({id:t.id,keyword:s.keyword||t.keyword||"",offset:s.offset||t.paging.offset||0,limit:s.limit||t.paging.pageSize||10});case 3:r=a.sent,n=r.data,i=r.paging,t.students=n,i.page=i.offset/i.limit+1,t.paging=k()(t.paging,i);case 9:case"end":return a.stop()}}),a)})))()},handleTestpaperTableChange:function(e){var t=this.status[this.currentTestpaperTab],a=N({},this.testpaperPaging[t]);a.current=e.current,a.offset=(e.current-1)*e.pageSize,this.testpaperPaging[t]=a;var s={limit:e.pageSize,offset:(e.current-1)*e.pageSize};this.getTestpaperResults(this.currentTestpaperTab,s)},handleHomeworkTableChange:function(e){var t=this.status[this.currentHomeworkTab],a=N({},this.homeworkPaging[t]);a.current=e.current,a.offset=(e.current-1)*e.pageSize,this.homeworkPaging[t]=a;var s={limit:e.pageSize,offset:(e.current-1)*e.pageSize};console.log(this.homeworkPaging),console.log(s),this.getHomeworkResults(this.currentHomeworkTab,s)},handleStudentTableChange:function(e){var t=N({},this.paging);t.current=e.current,t.offset=(e.current-1)*e.pageSize,this.paging=t;var a={limit:e.pageSize,offset:(e.current-1)*e.pageSize};this.getMultiClassStudents(a)},getMultiClass:function(){var e=this;return w()(_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.h.get(e.id).then((function(t){e.multiClass=t})).catch((function(e){}));case 2:case"end":return t.stop()}}),t)})))()},onRemoveStudent:function(e){var t=this;I.k.deleteMultiClassMember(this.multiClass.id,e).then((function(e){t.getMultiClassStudents(),t.$message.success("移除学员成功！")})).catch((function(e){t.$message.warning("移除学员失败！")}))},onSearch:function(e){this.keyword=e,this.getMultiClassStudents({keyword:e})},onClickHomeworkModal:function(e){this.isPermission("course_homework_review")&&(this.selectedUser=e,this.getHomeworkResults(),this.homeworkModalVisible=!0)},onClickTestpaperModal:function(e){this.isPermission("course_exam_review")&&(this.selectedUser=e,this.getTestpaperResults(),this.testpaperModalVisible=!0)},start:function(){var e=this;this.loading=!0,setTimeout((function(){e.loading=!1,e.selectedRowKeys=[]}),1e3)},onSelectChange:function(e){this.selectedRowKeys=e,this.getSelectedRowKeysQueryStr()},getHomeworkResults:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.status[t];I.l.searchStudentExamResults(this.$route.params.id,this.selectedUser.id,{status:s,type:"homework",offset:a.offset||this.homeworkPaging[s].offset||q[s].offset,limit:a.limit||this.homeworkPaging[s].pageSize||q[s].pageSize}).then((function(t){t.paging.page=t.paging.offset/t.paging.limit+1,e.homeworkPaging[s]=k()(e.homeworkPaging[s],t.paging),console.log(e.homeworkPaging[s]),e.$set(e.homeworkResultList,s,t)}))},getTestpaperResults:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.status[t];I.l.searchStudentExamResults(this.$route.params.id,this.selectedUser.id,{status:s,type:"testpaper",offset:a.offset||this.testpaperPaging[s].offset||q[s].offset,limit:a.limit||this.testpaperPaging[s].pageSize||q[s].pageSize}).then((function(t){t.paging.page=t.paging.offset/t.paging.limit+1,e.testpaperPaging[s]=k()(e.testpaperPaging[s],t.paging),e.$set(e.testpaperResultList,s,t)}))},addStudent:function(){this.addStudentVisible=!0},close:function(){this.viewStudentInfoVisible=!1},viewStudentInfo:function(e){var t=this;return w()(_.a.mark((function a(){return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,I.o.get(e.id);case 2:t.modalShowUser=a.sent,t.viewStudentInfoVisible=!0;case 5:case"end":return a.stop()}}),a)})))()},onBatchRemoveStudent:function(){if(0!==this.selectedRowKeys.length){var e=this;this.$confirm({title:"是否移除这些学员？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){I.k.batchDeleteClassMember(e.multiClass.id,{userIds:e.selectedUserIds}).then((function(t){e.getMultiClassStudents(),e.$message.success("移除学员成功！")})).catch((function(t){e.$message.warning("移除学员失败！")}))},onCancel:function(){console.log("Cancel")}})}else this.$message.error("请至少选中一项后移除",1)},onSelectEmpty:function(){this.$message.error("请至少选中一项后进行修改！",1)},confirm:function(e){this.onRemoveStudent(e)},getSelectedRowKeysQueryStr:function(){var e=this,t="",a=[];this.selectedRowKeys&&this.selectedRowKeys.forEach((function(s,r){e.students.forEach((function(e,r){e.id==s&&(t="".concat(t,"&ids[]=").concat(e.user.id),a.push(e.user.id))}))})),this.selectedRowKeysStr=t,this.selectedUserIds=a}}},j=(a(1407),Object(M.a)(D,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"student-manage"},[a("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"24px"}},[a("a-input-search",{staticClass:"pull-left",staticStyle:{width:"260px"},attrs:{placeholder:"请输入姓名或手机号搜索"},on:{search:e.onSearch}}),e._v(" "),a("a-space",{staticClass:"pull-left cd-ml24",attrs:{size:"middle"}},[e.isPermission("course_member_create")?a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(t){return e.addStudent()}}},[e._v("\n        添加学员\n      ")]):e._e(),e._v(" "),e.isPermission("course_member_import")?a("a-button",{attrs:{type:"primary",icon:"download","data-toggle":"modal","data-target":"#modal","data-backdrop":"static","data-keyboard":"false","data-url":"/importer/course-member/index?courseId="+e.multiClass.course.id}},[e._v("\n        批量导入\n      ")]):e._e(),e._v(" "),e.isPermission("course_member_delete")?a("a-button",{attrs:{type:"primary"},on:{click:e.onBatchRemoveStudent}},[a("a-space",[a("svg-icon",{attrs:{icon:"icon-remove"}}),e._v("\n          批量移除\n        ")],1)],1):e._e(),e._v(" "),0===e.selectedRowKeys.length&&e.isPermission("course_member_deadline_edit")?a("a-button",{attrs:{type:"primary"},on:{click:e.onSelectEmpty}},[a("a-space",[a("svg-icon",{attrs:{icon:"icon-edit"}}),e._v("\n          批量修改有效期\n        ")],1)],1):e._e(),e._v(" "),e.selectedRowKeys.length>0&&e.isPermission("course_member_deadline_edit")?a("a-button",{attrs:{type:"primary","data-toggle":"modal","data-target":"#modal","data-backdrop":"static","data-keyboard":"false","data-url":"/course_set/"+e.multiClass.course.courseSetId+"/manage/course/"+e.multiClass.course.id+"/student/deadline?"+e.selectedRowKeysStr}},[a("a-space",[a("svg-icon",{attrs:{icon:"icon-edit"}}),e._v("\n          批量修改有效期\n        ")],1)],1):e._e()],1),e._v(" "),a("a-space",{staticClass:"pull-right",attrs:{size:"middle"}},[e.isPermission("course_member_export")?a("a-button",{staticClass:"js-export-btn",attrs:{type:"primary",icon:"upload",href:"javascript:;","data-try-url":"/try/export/course-students","data-url":"/export/course-students","data-pre-url":"/pre/export/course-students","data-loading-text":"正在导出...","data-target-form":"#course-students-export","data-file-names":'["course-students"]'}},[e._v("\n        批量导出\n      ")]):e._e()],1)],1),e._v(" "),a("a-modal",{attrs:{title:"学员详细信息",visible:e.viewStudentInfoVisible},on:{cancel:e.close}},[a("userInfoTable",{attrs:{user:e.modalShowUser}}),e._v(" "),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.close}},[e._v(" 关闭 ")])],1)],2),e._v(" "),a("a-table",{attrs:{"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,"row-key":function(e){return e.id},pagination:e.paging,"data-source":e.students},on:{change:e.handleStudentTableChange},scopedSlots:e._u([{key:"name",fn:function(t,s){return a("a",{on:{click:function(t){return e.viewStudentInfo(s.user)}}},[e._v(e._s(s.user.nickname)),s.user.truename?a("span",[e._v("("+e._s(s.user.truename)+")")]):e._e()])}},{key:"phone",fn:function(t,a){return[e._v(e._s(a.user.verifiedMobile||"--"))]}},{key:"learningProgressPercent",fn:function(t,s){return a("a",{attrs:{"data-toggle":"modal","data-target":"#modal","data-url":"/course_set/"+e.multiClass.course.courseSetId+"/manage/course/"+e.multiClass.course.id+"/students/"+s.user.id+"/process"}},[e._v(e._s(t)+"%")])}},{key:"assistants",fn:function(e){return a("assistant",{attrs:{assistant:e}})}},{key:"threadCount",fn:function(t){return[e._v(e._s(t))]}},{key:"finishedHomeworkCount",fn:function(t,s){return a("a",{on:{click:function(t){return e.onClickHomeworkModal(s.user)}}},[e._v(e._s(t)+"/"+e._s(s.homeworkCount))])}},{key:"finishedTestpaperCount",fn:function(t,s){return a("a",{on:{click:function(t){return e.onClickTestpaperModal(s.user)}}},[e._v(e._s(t)+"/"+e._s(s.testpaperCount))])}},{key:"deadline",fn:function(t){return[e._v(e._s(e.$dateFormat(t,"YYYY-MM-DD HH:mm")||"--"))]}},{key:"createdTime",fn:function(t){return[e._v(e._s(e.$dateFormat(t,"YYYY-MM-DD HH:mm")||"--"))]}},{key:"actions",fn:function(t,s){return[a("a-space",{attrs:{size:"middle"}},[a("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return e.viewStudentInfo(s.user)}}},[e._v("查看")]),e._v(" "),a("a-popconfirm",{attrs:{title:"确定移除?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.confirm(s.user.id)}}},[e.isPermission("course_member_delete")?a("a-button",{attrs:{type:"link"}},[e._v("移除")]):e._e()],1)],1)]}}])}),e._v(" "),a("add-student-modal",{attrs:{visible:e.addStudentVisible,"multi-class":e.multiClass},on:{"handle-cancel":function(t){e.addStudentVisible=!1}}}),e._v(" "),a("form",{staticClass:"hide",attrs:{id:"course-students-export"}},[a("input",{attrs:{type:"hidden",name:"courseSetId"},domProps:{value:e.multiClass.course.courseSetId}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"courseId"},domProps:{value:e.multiClass.course.id}})]),e._v(" "),a("a-modal",{attrs:{visible:e.homeworkModalVisible,footer:null,title:e.selectedUser.nickname+" - 作业",width:920},on:{cancel:function(t){e.homeworkModalVisible=!1}}},[a("a-tabs",{model:{value:e.currentHomeworkTab,callback:function(t){e.currentHomeworkTab=t},expression:"currentHomeworkTab"}},[a("a-tab-pane",{key:0,attrs:{tab:"全部"}}),e._v(" "),a("a-tab-pane",{key:1,attrs:{tab:"未批阅"}}),e._v(" "),a("a-tab-pane",{key:2,attrs:{tab:"进行中"}}),e._v(" "),a("a-tab-pane",{key:3,attrs:{tab:"已批阅"}})],1),e._v(" "),e.homeworkResults?a("a-table",{attrs:{columns:e.resultColumns,"data-source":e.homeworkResults.data,pagination:e.homeworkPaging[e.status[e.currentHomeworkTab]]},on:{change:e.handleHomeworkTableChange},scopedSlots:e._u([{key:"lesson",fn:function(t,a){return[e._v(e._s(t.title||"--"))]}},{key:"exam",fn:function(t,a){return[e._v(e._s(t.name||"--"))]}},{key:"teacherInfo",fn:function(t,a){return[e._v(e._s(a.teacherInfo.nickname||"--"))]}},{key:"status",fn:function(t){return[e._v("\n        "+e._s(e.statusMap[t])+"\n      ")]}},{key:"end_time",fn:function(t){return[e._v("\n        "+e._s(e.$dateFormat(t,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(t,s){return["reviewing"===s.status?a("a",{attrs:{href:"/course/"+e.multiClass.course.id+"/manage/testpaper/"+s.id+"/check?action=check",target:"_blank"}},[e._v("去批阅")]):"finished"===s.status?a("a",{attrs:{href:"/testpaper/result/"+s.id+"/show?action=check",target:"_blank"}},[e._v("查看结果")]):["doing","paused"].includes(s.status)?a("span",[e._v("--")]):e._e()]}}],null,!1,3025023754)}):e._e()],1),e._v(" "),a("a-modal",{attrs:{visible:e.testpaperModalVisible,footer:null,title:e.selectedUser.nickname+" - 试卷",width:920},on:{cancel:function(t){e.testpaperModalVisible=!1}}},[a("a-tabs",{model:{value:e.currentTestpaperTab,callback:function(t){e.currentTestpaperTab=t},expression:"currentTestpaperTab"}},[a("a-tab-pane",{key:0,attrs:{tab:"全部"}}),e._v(" "),a("a-tab-pane",{key:1,attrs:{tab:"未批阅"}}),e._v(" "),a("a-tab-pane",{key:2,attrs:{tab:"进行中"}}),e._v(" "),a("a-tab-pane",{key:3,attrs:{tab:"已批阅"}})],1),e._v(" "),e.testpaperResults?a("a-table",{attrs:{columns:e.resultColumns,"data-source":e.testpaperResults.data,pagination:e.testpaperPaging[e.status[e.currentTestpaperTab]]},on:{change:e.handleTestpaperTableChange},scopedSlots:e._u([{key:"lesson",fn:function(t,a){return[e._v(e._s(t.title||"--"))]}},{key:"exam",fn:function(t,a){return[e._v(e._s(t.name||"--"))]}},{key:"teacherInfo",fn:function(t,a){return[e._v(e._s(a.teacherInfo.nickname||"--"))]}},{key:"status",fn:function(t){return[e._v("\n        "+e._s(e.statusMap[t])+"\n      ")]}},{key:"end_time",fn:function(t){return[e._v("\n        "+e._s(e.$dateFormat(t,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(t,s){return["reviewing"===s.status?a("a",{attrs:{href:"/course/"+e.multiClass.course.id+"/manage/testpaper/"+s.id+"/check?action=check",target:"_blank"}},[e._v("去批阅")]):"finished"===s.status?a("a",{attrs:{href:"/testpaper/result/"+s.id+"/show?action=check",target:"_blank"}},[e._v("查看结果")]):["doing","paused"].includes(s.status)?a("span",[e._v("--")]):e._e()]}}],null,!1,3025023754)}):e._e()],1)],1)}),[],!1,null,null,null));t.default=j.exports},914:function(e,t,a){"use strict";a.r(t);var s=a(127),r=a.n(s),n=a(104),i=a.n(n),o=a(78),l=a.n(o),u=a(71),c=a.n(u),d=a(79),m=a.n(d),p=a(45),f=a.n(p),v=a(37),h=a.n(v),g=a(1368),_=a.n(g),b=a(536),k=a(1393),y={video:"视频",audio:"音频",live:"直播",discuss:"讨论",flash:"Flash",doc:"文档",ppt:"PPT",testpaper:"考试",homework:"作业",exercise:"练习",download:"下载资料",text:"图文"},w={name:"TeachMode",filters:{teachType:function(e){return y[e]}},props:{record:{type:Object,required:!0,default:function(){return{}}}},computed:{replayStatus:function(){var e=this.record.tasks,t=e.type,a=e.activity.ext;return"live"==t&&"videoGenerate"==a.replayStatus},progressStatus:function(){var e=this.record.tasks,t=e.type,a=e.activity.ext;return"live"==t?a.progressStatus:""}}},S=a(29),x=Object(S.a)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  "+e._s(e._f("teachType")(e.record.tasks.type))+"\n\n  "),e.progressStatus?[a("a-divider",{attrs:{type:"vertical"}}),e._v(" "),"created"==e.progressStatus?a("a-checkable-tag",{staticStyle:{color:"#fb8d4d"}},[e._v("未开始")]):"start"==e.progressStatus?a("a-checkable-tag",{staticStyle:{color:"#43bc60"}},[e._v("直播中")]):"closed"==e.progressStatus?a("a-checkable-tag",[e._v("已结束")]):e._e()]:e._e(),e._v(" "),e.replayStatus?[a("br"),e._v(" "),a("a-tag",{staticStyle:{"margin-top":"4px"},attrs:{color:"green"}},[e._v("有回放")])]:e._e()],2)}),[],!1,null,null,null).exports,C=a(1374);function T(e,t){var a=f()(e);if(m.a){var s=m()(e);t&&(s=s.filter((function(t){return c()(e,t).enumerable}))),a.push.apply(a,s)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):l.a?i()(e,l()(a)):T(Object(a)).forEach((function(t){r()(e,t,c()(a,t))}))}return e}var R=[{title:"课时名称",dataIndex:"name",width:"15%",scopedSlots:{customRender:"name"}},{title:"教学模式",dataIndex:"mode",filters:[{text:"视频",value:"video"},{text:"音频",value:"audio"},{text:"直播",value:"live"},{text:"讨论",value:"discuss"},{text:"文档",value:"doc"},{text:"PPT",value:"ppt"},{text:"考试",value:"testpaper"},{text:"作业",value:"homework"},{text:"练习",value:"exercise"},{text:"下载资料",value:"download"},{text:"图文",value:"text"}],width:"12%",scopedSlots:{customRender:"mode"}},{title:"开课时间",dataIndex:"startTime",width:"13%",scopedSlots:{customRender:"startTime"}},{title:"时长",width:"10%",dataIndex:"time",scopedSlots:{customRender:"time"}},{title:"授课老师",width:"10%",ellipsis:!0,dataIndex:"teacher",scopedSlots:{customRender:"teacher"}},{title:"助教老师",width:"10%",ellipsis:!0,dataIndex:"assistant",scopedSlots:{customRender:"assistant"}},{title:"问题讨论",width:"10%",dataIndex:"questionNum",scopedSlots:{customRender:"questionNum"}},{title:"学习人数",width:"10%",dataIndex:"studyStudentNum",scopedSlots:{customRender:"studyStudentNum"}},{title:"操作",width:"128px",dataIndex:"actions",scopedSlots:{customRender:"actions"}}],M={components:{ClassName:k.a,TeachMode:x,Assistant:C.a},data:function(){return{data:[],pagination:{},loading:!1,columns:R,locale:{filterConfirm:"确定",filterReset:"重置"},multiClassId:this.$route.params.id,keywords:"",courseId:0,courseSetId:0}},mounted:function(){var e=this;this.fetchLessons(),this.fetchMultiClass(),$("#modal").on("hide.bs.modal",(function(){var t={limit:10,offset:10*(e.pagination.current-1)};e.fetchLessons(t)}))},filters:{timeTransfer:function(e){var t=_.a.floor(e/60),a=e%60,s="".concat(t,"min ");return a&&(s+="".concat(a,"s")),s}},methods:{handleTableChange:function(e,t,a){var s=a.order,r=I({},this.pagination);r.current=e.current,this.pagination=r;var n={limit:e.pageSize,offset:(e.current-1)*e.pageSize};_.a.size(t)&&(n.types=t.mode),s&&(n.sort="ascend"==s?"ASC":"DESC"),this.fetchLessons(n)},fetchMultiClass:function(){var e=this;b.h.get(this.multiClassId).then((function(t){var a=t.course,s=a.id,r=a.courseSetId;e.courseId=s,e.courseSetId=r}))},fetchLessons:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,b.h.getLessons(this.multiClassId,I({limit:10,titleLike:this.keywords},t)).then((function(t){var a=I({},e.pagination);a.total=t.paging.total,e.loading=!1,e.data=t.data,e.pagination=a}))},onSearch:function(e){this.keywords=e,this.pagination.current=1,this.fetchLessons()},handleMenuClick:function(e,t){"copy"!==e?["publish","unpublish"].includes(e)?this.updateTaskStatus(e,t):"delete"===e&&this.deleteTask(t):this.copy(t)},copy:function(e){this.$clipboard(this.copyTaskUrl(e)),this.$message.success("复制成功")},updateTaskStatus:function(e,t){var a=this,s=t.tasks,r=s.courseId,n=s.id,i="publish"==e?"发布成功":"取消发布成功";b.c.updateTaskStatus(r,n,{type:e}).then((function(){a.$message.success(i),_.a.forEach(a.data,(function(t){t.tasks.id==n&&(t.tasks.status="publish"===e?"published":"create")}))}))},deleteTask:function(e){var t=this,a=e.tasks,s=a.courseId,r=a.id;this.$confirm({title:"删除",content:"是否确定删除该课时吗?",okType:"danger",onOk:function(){b.c.deleteTask(s,r).then((function(e){e.success&&(t.$message.success("删除成功"),_.a.forEach(t.data,(function(e,a){e.tasks.id==r&&t.data.splice(a,1)})))}))}})},copyTaskUrl:function(e){return"".concat(window.location.origin,"/course/").concat(e.courseId)},goToEditorLesson:function(){this.$router.push({name:"MultiClassEditorLesson",params:{id:this.courseId},query:{courseSetId:this.courseSetId,multiClassId:this.multiClassId}})}}},P=(a(1406),Object(S.a)(M,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"class-info"},[a("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"16px"}},[a("a-input-search",{staticClass:"pull-left",staticStyle:{width:"260px"},attrs:{placeholder:"请输入课时关键字搜索"},on:{search:e.onSearch}}),e._v(" "),e.isPermission("course_lesson_manage")?a("a-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:e.goToEditorLesson}},[e._v("\n      重排课时/新增课时\n    ")]):e._e()],1),e._v(" "),a("a-table",{attrs:{columns:e.columns,"row-key":function(e){return e.id},"data-source":e.data,loading:e.loading,pagination:e.pagination,locale:e.locale},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"name",fn:function(e,t){return a("class-name",{attrs:{record:t}})}},{key:"mode",fn:function(e,t){return a("teach-mode",{attrs:{record:t}})}},{key:"startTime",fn:function(t,a){return["live"===a.tasks.type?[e._v("\n        "+e._s(e.$dateFormat(a.tasks.startTime,"YYYY-MM-DD HH:mm"))+"\n      ")]:[e._v(" -- ")]]}},{key:"time",fn:function(t,a){return[["video","live"].includes(a.tasks.type)?[e._v("\n        "+e._s(e._f("timeTransfer")(a.tasks.length))+"\n      ")]:[e._v("--")]]}},{key:"teacher",fn:function(t){return[e._v(e._s(t.nickname))]}},{key:"assistant",fn:function(e){return a("assistant",{attrs:{assistant:e}})}},{key:"questionNum",fn:function(t,s){return a("a",{attrs:{href:"/my/course/"+s.tasks.courseId+"/question?type=question",target:"_blank"}},[e._v(e._s(t))])}},{key:"studyStudentNum",fn:function(t,a){return[e._v("\n      "+e._s(t)+"/"+e._s(a.totalStudentNum)+"\n    ")]}},{key:"actions",fn:function(t,s){return[a("a-dropdown",{staticStyle:{"margin-right":"12px"},attrs:{trigger:["hover"],placement:"bottomRight"}},[a("a-button",{attrs:{type:"link"},on:{click:function(e){return e.preventDefault()}}},[a("a-icon",{attrs:{type:"copy"}})],1),e._v(" "),a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){var a=t.key;return e.handleMenuClick(a,s)}},slot:"overlay"},[a("a-menu-item",{key:"copy"},[e._v("\n            复制课程链接\n          ")])],1)],1),e._v(" "),e.isPermission("course_lesson_edit")?a("a-button",{attrs:{type:"link","data-toggle":"modal","data-target":"#modal","data-url":"/course/"+s.courseId+"/task/"+s.tasks.id+"/update"}},[e._v("编辑")]):e._e(),e._v(" "),e.isPermission("course_lesson_manage")?a("a-dropdown",{attrs:{trigger:["hover"],placement:"bottomRight"}},[a("a",{staticClass:"ant-dropdown-link",on:{click:function(e){return e.preventDefault()}}},[a("a-icon",{attrs:{type:"caret-down"}})],1),e._v(" "),a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){var a=t.key;return e.handleMenuClick(a,s)}},slot:"overlay"},["published"==s.tasks.status&&e.isPermission("course_lesson_manage")?a("a-menu-item",{key:"unpublish"},[e._v("\n            取消发布\n          ")]):[e.isPermission("course_lesson_manage")?a("a-menu-item",{key:"publish"},[e._v("\n              立即发布\n            ")]):e._e(),e._v(" "),e.isPermission("course_lesson_manage")?a("a-menu-item",{key:"delete"},[e._v("\n              删除\n            ")]):e._e()]],2)],1):e._e()]}}])})],1)}),[],!1,null,null,null));t.default=P.exports},916:function(e,t,a){"use strict";a.r(t);var s=a(1370),r=a(1392),n={name:"EditorLesson",components:{AsideLayout:s.a,Schedule:r.a},data:function(){return{form:this.$form.createForm(this,{name:"multi_class_editor_lesson"}),courseId:this.$route.params.id,courseSetId:this.$route.query.courseSetId,multiClassId:this.$route.query.multiClassId}},methods:{onClickGoToCourseManage:function(){this.$router.push({name:"MultiClassCourseManage",params:{id:this.multiClassId}})}}},i=(a(1409),a(29)),o=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside-layout",{staticStyle:{"padding-bottom":"88px"},attrs:{breadcrumbs:[{name:"课时设置"}]}},[a("a-form",{staticStyle:{"max-width":"900px"},attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:20}}},[a("a-form-item",{attrs:{label:"排课"}},[a("Schedule",{attrs:{"course-id":e.courseId,courseSetId:e.courseSetId}})],1)],1),e._v(" "),a("div",{staticClass:"create-multi-class-btn-group"},[a("a-space",{attrs:{size:"large"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.onClickGoToCourseManage}},[e._v("\n        确定\n      ")]),e._v(" "),a("a-button",{on:{click:e.onClickGoToCourseManage}},[e._v("\n        取消\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=o.exports},917:function(e,t,a){"use strict";a.r(t);var s={name:"DataPreview",methods:{getIframeStatus:function(){var e,t,a=document.getElementById("iframe"),s=a.contentWindow;"complete"===s.document.readyState?(e=s.document.documentElement.scrollWidth,t=s.document.documentElement.scrollHeight,a.width=e,a.height=t):setTimeout(this.getIframeStatus,10)}},created:function(){setTimeout(this.getIframeStatus,10)}},r=a(29),n=Object(r.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"student-manage"},[t("iframe",{staticStyle:{position:"inherit",left:"0",top:"0","min-height":"600px",height:"100%",width:"100%",border:"0px"},attrs:{id:"iframe",src:"/admin/v2/multi_class/overview/"+this.$route.params.id,frameborder:"0",allowfullscreen:"true",scrolling:"yes",allow:"screen-wake-lock"}})])}),[],!1,null,null,null);t.default=n.exports},918:function(e,t,a){"use strict";a.r(t);var s=a(28),r=a.n(s),n=a(42),i=a.n(n),o=a(536),l=a(1393),u=a(1368),c=a.n(u),d=[{title:"课时",dataIndex:"lesson",scopedSlots:{customRender:"lesson"}},{title:"作业/考试",dataIndex:"name",scopedSlots:{customRender:"name"},filters:[{text:"作业",value:"homework"},{text:"考试",value:"testpaper"}]},{title:"题量",dataIndex:"item_count",scopedSlots:{customRender:"item_count"}},{title:"已批",dataIndex:"finished",scopedSlots:{customRender:"finished"}},{title:"未批",dataIndex:"reviewing",scopedSlots:{customRender:"reviewing"}},{title:"未交",dataIndex:"doing",scopedSlots:{customRender:"doing"}},{title:"开始时间",dataIndex:"startTime",scopedSlots:{customRender:"startTime"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],m=[{title:"姓名",dataIndex:"nickname",scopedSlots:{customRender:"nickname"}},{title:"成绩",dataIndex:"grade",scopedSlots:{customRender:"grade"}},{title:"提交时间",dataIndex:"end_time",scopedSlots:{customRender:"end_time"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"批阅人",dataIndex:"teacherInfo",scopedSlots:{customRender:"teacherInfo"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],p={name:"HomeWorkReview",components:{ClassName:l.a},data:function(){return{columns:d,resultColumns:m,getListLoading:!1,homeworksList:[],examResultList:{},paging:{total:0,offset:0,pageSize:10},modalVisible:!1,currentTab:0,currentTask:{},status:["all","reviewing","doing","finished"],statusMap:{doing:"进行中",paused:"暂停",reviewing:"未批阅",finished:"已批阅"},gradeMap:{excellent:"优秀",good:"良好",passed:"合格",unpassed:"不合格"}}},watch:{currentTab:function(e){this.getExamResults(e)}},computed:{examResults:function(){var e=this.status[this.currentTab];return this.examResultList[e]}},created:function(){this.getHomeworkList()},methods:{getHomeworkList:function(){var e=arguments,t=this;return i()(r.a.mark((function a(){var s,n,i,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=e.length>0&&void 0!==e[0]?e[0]:{},t.getListLoading=!0,a.prev=2,a.next=5,o.i.getExams({multiClassId:t.$route.params.id,types:s.types||[],offset:s.offset||0,limit:s.pageSize||10});case 5:n=a.sent,i=n.data,l=n.paging,t.homeworksList=i,t.paging=c.a.assign(l,{pageSize:Number(l.limit)});case 10:return a.prev=10,t.getListLoading=!1,a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[2,,10,13]])})))()},showResultListModal:function(e,t){var a=this.status.indexOf(e);this.currentTask=t,this.currentTab=a,this.currentTab==a&&this.getExamResults(a),this.modalVisible=!0},getExamResults:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this.status[t];o.i.getExamResults({status:a,multiClassId:this.$route.params.id,taskId:this.currentTask.id}).then((function(t){t.paging.pageSize=t.paging.limit,e.$set(e.examResultList,a,t)}))},change:function(e,t,a,s){s.currentDataSource;var r={};t&&c.a.isArray(t.name)&&(r.types=t.name),e&&(r.offset=e.pageSize*(e.current-1),r.pageSize=e.pageSize),r&&this.getHomeworkList(r)}}},f=(a(1408),a(29)),v=Object(f.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-spin",{attrs:{spinning:e.getListLoading}},[a("a-table",{attrs:{columns:e.columns,"data-source":e.homeworksList,pagination:e.paging,rowKey:function(e){return e.id}},on:{change:e.change},scopedSlots:e._u([{key:"lesson",fn:function(e,t){return a("class-name",{attrs:{record:t}})}},{key:"name",fn:function(t,a){return[e._v(e._s(a.tasks.assessment.name))]}},{key:"item_count",fn:function(t,a){return[e._v(e._s(a.tasks.assessment.item_count))]}},{key:"finished",fn:function(t,s){return a("a",{on:{click:function(t){return e.showResultListModal("finished",s.tasks)}}},[e._v("\n        "+e._s(s.tasks.assessmentStatusNum.finished||0)+"\n      ")])}},{key:"reviewing",fn:function(t,s){return a("a",{on:{click:function(t){return e.showResultListModal("reviewing",s.tasks)}}},[e._v("\n        "+e._s(s.tasks.assessmentStatusNum.reviewing||0)+"\n      ")])}},{key:"doing",fn:function(t,s){return a("a",{on:{click:function(t){return e.showResultListModal("doing",s.tasks)}}},[e._v("\n        "+e._s(s.tasks.assessmentStatusNum.doing||0)+"\n      ")])}},{key:"startTime",fn:function(t,a){return[e._v("\n        "+e._s(e.$dateFormat(a.tasks.createdTime,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(t,s){return[a("a-space",{attrs:{size:"large"}},[a("a-button",{attrs:{type:"link"}},[a("a",{staticClass:"ant-dropdown-link",attrs:{href:"/course/"+s.tasks.courseId+"/manage/exam/activity/"+s.tasks.activityId+"/analysis",target:"_blank"}},[e._v("\n              答题分布\n            ")])]),e._v(" "),a("a-button",{attrs:{type:"link","data-target":"#modal","data-toggle":"modal","data-url":"/course/"+s.tasks.courseId+"/activity/"+s.tasks.activityId+"/testpaper/graph"}},[e._v("\n            成绩分布\n          ")])],1)]}}])})],1),e._v(" "),a("a-modal",{attrs:{visible:e.modalVisible,footer:null,title:e.currentTask.assessment?e.currentTask.assessment.name:"",width:920},on:{cancel:function(t){e.modalVisible=!1}}},[a("a-tabs",{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("a-tab-pane",{key:0,attrs:{tab:"全部"}}),e._v(" "),a("a-tab-pane",{key:1,attrs:{tab:"未批阅"}}),e._v(" "),a("a-tab-pane",{key:2,attrs:{tab:"进行中"}}),e._v(" "),a("a-tab-pane",{key:3,attrs:{tab:"已批阅"}})],1),e._v(" "),e.examResults?a("a-table",{attrs:{columns:e.resultColumns,"data-source":e.examResults.data,pagination:e.examResults.paging},scopedSlots:e._u([{key:"nickname",fn:function(t,a){return[e._v(e._s(a.userInfo.nickname))]}},{key:"grade",fn:function(t,a){return[e._v(e._s("reviewing"===a.status?"--":e.gradeMap[a.answerReportInfo.grade]))]}},{key:"teacherInfo",fn:function(t,a){return[e._v(e._s(a.teacherInfo.nickname||"--"))]}},{key:"status",fn:function(t){return[e._v("\n        "+e._s(e.statusMap[t])+"\n      ")]}},{key:"end_time",fn:function(t){return[e._v("\n        "+e._s(e.$dateFormat(t,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(t,s){return["reviewing"===s.status?a("a",{attrs:{href:"/course/"+e.currentTask.courseId+"/manage/testpaper/"+s.id+"/check?action=check",target:"_blank"}},[e._v("去批阅")]):"finished"===s.status?a("a",{attrs:{href:"/homework/result/"+s.id+"/show?action=check",target:"_blank"}},[e._v("查看结果")]):e._e()]}}],null,!1,2664890532)}):e._e()],1)],1)}),[],!1,null,null,null);t.default=v.exports},920:function(e,t,a){"use strict";a.r(t);var s=a(25),r=a.n(s),n=a(37),i=a.n(n),o=a(32),l=a.n(o),u=a(28),c=a.n(u),d=a(42),m=a.n(d),p=a(1370),f=a(65),v=a.n(f),h=a(1401),g=a.n(h),_=(a(1403),a(536)),b={name:"CreateCourse",props:{},components:{VueCropper:g.a,AsideLayout:p.a},data:function(){return{form:this.$form.createForm(this),formInfo:{buyable:!0},teacher:{list:[],title:"",flag:!0,initialValue:void 0,paging:{pageSize:10,current:0}},assistant:{list:[],title:"",flag:!0,initialValue:[],paging:{pageSize:10,current:0}},courseCoverUrl:"",cropModalVisible:!1,loading:!1,editor:{},ajaxLoading:!1,uploadToken:{},courseCoverName:"",uploading:!1,imgs:null,imageUploadUrl:"/editor/upload?token=",flashUploadUrl:"/editor/upload?token=",liveCapacity:0}},created:function(){this.fetchAssistants(),this.fetchTeacher(),this.getLiveCapacity()},mounted:function(){var e=this;return m()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEditorUploadToken();case 2:e.editor=CKEDITOR.replace("summary",{allowedContent:!0,toolbar:"Detail",fileSingleSizeLimit:app.fileSingleSizeLimit,filebrowserImageUploadUrl:e.imageUploadUrl,filebrowserFlashUploadUrl:e.flashUploadUrl});case 3:case"end":return t.stop()}}),t)})))()},methods:{getUploadToken:function(){var e=this;return m()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.n.get("default");case 2:return e.uploadToken=t.sent,t.abrupt("return",l.a.resolve(1));case 4:case"end":return t.stop()}}),t)})))()},getEditorUploadToken:function(){var e=this;return m()(c.a.mark((function t(){var a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.n.get("course");case 2:return a=t.sent,s=a.token,e.imageUploadUrl+=s,e.flashUploadUrl+=s,t.abrupt("return",l.a.resolve(1));case 7:case"end":return t.stop()}}),t)})))()},getLiveCapacity:function(){var e=this;return m()(c.a.mark((function t(){var a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.f.search();case 2:a=t.sent,s=a.capacity,e.liveCapacity=Number(s);case 5:case"end":return t.stop()}}),t)})))()},saveCourseSet:function(){var e=this;this.form.validateFields(function(){var t=m()(c.a.mark((function t(a,s){var r,n,i,o,l,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return e.ajaxLoading=!0,s=e.formatValues(s),t.prev=4,t.next=7,_.d.add(s);case 7:r=t.sent,n=r.error,i=r.defaultCourseId,o=r.title,l=r.id,u=r.title,n||(e.$message.success("创建成功"),e.goToMultiClassCreatePage({id:i,title:u,courseSetId:l,courseSetTitle:o}));case 14:return t.prev=14,e.ajaxLoading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[4,,14,17]])})));return function(e,a){return t.apply(this,arguments)}}())},disabledTeacher:function(e){var t=e||this.form.getFieldValue("assistants")||this.assistant.initialValue;v.a.forEach(this.teacher.list,(function(e){v.a.includes(t,e.id)||(e.disabled=!1),v.a.forEach(t,(function(t){e.id==t&&(e.disabled=!0)}))}))},disabledAssistant:function(e){var t=e||this.form.getFieldValue("teachers")||this.teacher.initialValue;v.a.forEach(this.assistant.list,(function(e){e.id==t?e.disabled=!0:e.disabled=!1}))},formatValues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e.summary=this.editor.getData(),e.teachers=[e.teachers],e=v.a.assignIn(e,{buyable:Number(this.formInfo.buyable)}),this.imgs&&(e.images=this.imgs),e)["buyExpiryTime","expiryStartDate","expiryEndDate","deadline"].includes(t)&&(e[t]=new Date(e[t]).getTime(),e[t]=v.a.floor(e[t]/1e3));return e},fetchTeacher:function(){var e=this,t=this.teacher,a=t.title,s=t.paging,r=s.pageSize,n={limit:r,offset:r*s.current};a&&(n.nickname=a),_.m.search(n).then((function(t){e.teacher.paging.current++,e.teacher.list=v.a.concat(e.teacher.list,t.data),v.a.size(e.teacher.list)>=t.paging.total&&(e.teacher.flag=!1),e.disabledTeacher()}))},handleSearchTeacher:v.a.debounce((function(e){this.teacher={list:[],title:e,flag:!0,paging:{pageSize:10,current:0}},this.fetchTeacher()}),300),teacherScroll:v.a.debounce((function(e){var t=e.target;t.scrollHeight-t.offsetHeight-20<t.scrollTop&&this.teacher.flag&&this.fetchTeacher()}),300),fetchAssistants:function(){var e=this,t=this.assistant,a=t.title,s=t.paging,r=s.pageSize,n={limit:r,offset:r*s.current};a&&(n.nickname=a),_.a.search(n).then((function(t){e.assistant.paging.current++,e.assistant.list=v.a.concat(e.assistant.list,t.data),v.a.size(e.assistant.list)>=t.paging.total&&(e.assistant.flag=!1),e.disabledAssistant()}))},handleSearchAssistant:v.a.debounce((function(e){this.assistant={list:[],title:e,flag:!0,paging:{pageSize:10,current:0}},this.fetchAssistants()}),300),assistantScroll:v.a.debounce((function(e){var t=e.target;t.scrollHeight-t.offsetHeight-20<t.scrollTop&&this.assistant.flag&&this.fetchAssistants()}),300),handleChange:function(e,t){console.log(e),"teacher"!==t?"assistant"===t&&this.disabledTeacher(e):this.disabledAssistant(e)},switchBuyAble:function(e){this.$set(this.formInfo,"buyable",e)},uploadCourseCover:function(e){var t=this,a=new FileReader;this.loading=!0,a.onload=function(e){t.courseCoverUrl=e.target.result,t.cropModalVisible=!0,t.loading=!1},this.courseCoverName=e.file.originFileObj.name,a.readAsDataURL(e.file.originFileObj)},reSelectCourseCover:function(){var e=this.$refs.upload.$el.getElementsByTagName("input");this.cropModalVisible=!1,e.length>0&&e[0].click()},saveCourseCover:function(){var e=this;return m()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.uploadToken.expiry&&!(new Date>=new Date(e.uploadToken.expiry))){t.next=3;break}return t.next=3,e.getUploadToken();case 3:e.$refs.cropper.getCroppedCanvas().toBlob(function(){var t=m()(c.a.mark((function t(a){var s,r,n,o,l,u,d,m,p,f,h,g,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.$refs.cropper.getData(),r=s.x,n=s.y,o=s.width,l=s.height,u=e.$refs.cropper.getImageData(),d={x:v.a.ceil(v.a.max([0,r])),y:v.a.ceil(v.a.max([0,n])),width:v.a.ceil(o),height:v.a.ceil(l)},m=i()({x:d.x,y:d.y,x2:v.a.add(d.x,d.width),y2:v.a.add(d.y,d.height),w:d.width,h:d.height,"imgs[large][0]":480,"imgs[large][1]":270,"imgs[middle][0]":304,"imgs[middle][1]":171,"imgs[small][0]":96,"imgs[small][1]":54,post:!1,width:u.naturalWidth,height:u.naturalHeight,group:"course"},"post",!1),(p=new FormData).append("file",a,e.courseCoverName),p.append("token",e.uploadToken.token),e.uploading=!0,t.prev=8,t.next=11,_.e.uploadFile(p);case 11:for(b in f=t.sent,h=f.url,e.courseCoverUrl=h,g=new FormData,m)g.append(b,m[b]);return t.next=18,_.e.imgCrop(g);case 18:e.imgs=t.sent;case 19:return t.prev=19,e.uploading=!1,e.cropModalVisible=!1,t.finish(19);case 23:case"end":return t.stop()}}),t,null,[[8,,19,23]])})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})))()},requiredValidator:function(e,t,a){t||a(e.message),a()},goToMultiClassCreatePage:function(e){e?v.a.isObject(e)&&this.$router.replace({name:"MultiClassCreate",query:{course:r()(e)}}):this.$router.go(-1)},validatePrice:function(e,t,a){!1===/^[0-9]{0,8}(\.\d{0,2})?$/.test(t)&&a(e.message),a()},validateRange:function(e,t,a){t=Number(t),!v.a.isInteger(t)||t<0?a("请输入正整数"):t>this.liveCapacity&&a("网校可支持最多".concat(this.liveCapacity,"人同时参加直播。")),a()}}},k=(a(1404),a(29)),y=Object(k.a)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside-layout",{staticClass:"create-course",attrs:{breadcrumbs:[{name:"新建课程"}]}},[a("a-form",{staticStyle:{"max-width":"860px"},attrs:{form:e.form,"label-col":{span:3},"wrapper-col":{span:21}}},[a("a-form-item",{attrs:{label:"课程类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:"normal"}],expression:"['type', {\n          initialValue: 'normal'\n        }]"}],attrs:{options:[{label:"普通课程",value:"normal"},{label:"直播课程",value:"live"}]}})],1),e._v(" "),a("a-form-item",{attrs:{label:"课程标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写课程名称"}]}],expression:"['title', { rules: [\n          { required: true, message: '请填写课程名称' },\n        ]} ]"}],attrs:{placeholder:"请输入课程标题"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"课程副标题"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["subtitle"],expression:"['subtitle']"}],attrs:{"auto-size":"",placeholder:"请输入课程副标题"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"封面图片"}},[a("a-upload",{ref:"upload",attrs:{accept:"image/*","file-list":[],"list-type":"picture-card"},on:{change:e.uploadCourseCover}},[e.courseCoverUrl?a("img",{staticStyle:{width:"100%"},attrs:{src:e.courseCoverUrl}}):a("div",[a("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),a("div",{staticClass:"ant-upload-text"},[e._v("\n          上传照片\n        ")])],1)])],1),e._v(" "),a("a-form-item",{attrs:{label:"课程简介"}},[a("div",{attrs:{id:"summary"}})]),e._v(" "),a("a-form-item",{attrs:{label:"授课教师"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["teachers",{rules:[{required:!0,message:"请选择授课老师"}]}],expression:"['teachers', { rules: [{ required: true, message: '请选择授课老师' }] }]"}],attrs:{"show-search":"","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null,placeholder:"请选择授课教师"},on:{popupScroll:e.teacherScroll,search:e.handleSearchTeacher,change:function(t){return e.handleChange(t,"teacher")}}},e._l(e.teacher.list,(function(t){return a("a-select-option",{key:t.id,attrs:{disabled:t.disabled}},[e._v("\n          "+e._s(t.nickname)+"\n        ")])})),1)],1),e._v(" "),a("a-form-item",{attrs:{label:"助教"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["assistants",{rules:[{required:!0,message:"至少选择一位助教"}]}],expression:"['assistants', { rules: [{ required: true, message: '至少选择一位助教'}]}]"}],attrs:{mode:"multiple","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null,placeholder:"请选择一个或多个助教"},on:{popupScroll:e.assistantScroll,search:e.handleSearchAssistant,change:function(t){return e.handleChange(t,"assistant")}}},e._l(e.assistant.list,(function(t){return a("a-select-option",{key:t.id,attrs:{disabled:t.disabled}},[e._v("\n          "+e._s(t.nickname)+"\n        ")])})),1)],1),e._v(" "),a("a-form-item",{staticStyle:{position:"relative"},attrs:{label:"价格"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["originPrice",{initialValue:0,rules:[{validator:e.validatePrice,message:"请输入大于0的有效价格，最多两位小数，整数位不超过8位！"}]}],expression:"['originPrice', { initialValue: 0, rules: [\n          { validator: validatePrice, message: '请输入大于0的有效价格，最多两位小数，整数位不超过8位！' }\n        ] }]"}],attrs:{placeholder:"请输入产品价格"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("元")])])],1),e._v(" "),a("a-form-item",{attrs:{label:"学习模式"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["learnMode",{initialValue:"freeMode"}],expression:"['learnMode', {\n          initialValue: 'freeMode'\n        }]"}],attrs:{options:[{label:"自由式",value:"freeMode"},{label:"解锁式",value:"lockMode"}]}}),e._v(" "),a("div",{staticClass:"color-gray cd-mt8"},[[e._v("自由式：学习过程自由安排;")],e._v(" "),[e._v("解锁式：根据既定顺序逐个解锁学习")]],2)],1),e._v(" "),a("a-form-item",{attrs:{label:"任务完成规则"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["enableFinish",{initialValue:"1"}],expression:"['enableFinish', {\n          initialValue: '1'\n        }]"}],attrs:{options:[{label:"无限制",value:"1"},{label:"由任务完成条件决定",value:"0"}]}}),e._v(" "),a("div",{staticClass:"color-gray cd-mt8"},[[e._v("必须达到完成条件，任务才算完成")]],2)],1),e._v(" "),"live"===e.form.getFieldValue("type")?a("a-form-item",{attrs:{label:"课程人数"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxStudentNum",{rules:[{required:!0,message:"请输入课程人数"},{validator:e.validateRange}]}],expression:"['maxStudentNum', { rules: [\n          { required: true, message: '请输入课程人数' },\n          { validator: validateRange },\n        ]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入课程人数"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("人")])])],1):e._e(),e._v(" "),a("a-form-item",{attrs:{label:"是否可加入"}},[a("a-switch",{model:{value:e.formInfo.buyable,callback:function(t){e.$set(e.formInfo,"buyable",t)},expression:"formInfo.buyable"}}),e._v(" "),a("div",{staticClass:"color-gray cd-mt8"},[[e._v("关闭后，前台显示为“限制课程”，学员自己无法加入，需要由老师手动添加学员。常用于封闭型教学。")]],2)],1),e._v(" "),a("a-form-item",{attrs:{label:"加入截止日期"}},[a("div",{staticStyle:{overflow:"hidden"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["enableBuyExpiryTime",{initialValue:"0",rules:[{required:!0,message:"请输入加入截止日期"}]}],expression:"['enableBuyExpiryTime', {\n            initialValue: '0',\n            rules: [{ required: true, message: '请输入加入截止日期' }]\n          }]"}],staticClass:"pull-left mt3",attrs:{options:[{label:"不限制",value:"0"},{label:"自定义",value:"1"}]}}),e._v(" "),"1"===e.form.getFieldValue("enableBuyExpiryTime")?a("a-form-item",{staticClass:"pull-left",staticStyle:{margin:"4px 0 0"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["buyExpiryTime",{rules:[{required:!0,message:"请输入加入截止日期"}]}],expression:"['buyExpiryTime', {\n              rules: [{ required: true, message: '请输入加入截止日期' }]\n            }]"}],attrs:{placeholder:""}})],1):e._e()],1)]),e._v(" "),a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"学习有效期"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiryMode",{initialValue:"forever"}],expression:"['expiryMode', { initialValue: 'forever' }]"}],attrs:{options:[{label:"随到随学",value:"days"},{label:"固定周期",value:"date"},{label:"长期有效",value:"forever"}]}}),e._v(" "),a("a-tooltip",{attrs:{overlayClassName:"expand-tooltip"}},[a("template",{slot:"title"},[e._v("\n          随到随学：有效期从学员加入的当天开始算起，截至到期当天晚上的23:59"),a("br"),e._v("\n          固定周期：有固定的学习开始日期和结束日期"),a("br"),e._v("\n          过期后无法继续学习，系统会在到期前10天提醒学员。\n        ")]),e._v(" "),a("a",[a("a-icon",{staticStyle:{"margin-left":"-6px"},attrs:{type:"question-circle"}})],1)],2)],1),e._v(" "),"days"===e.form.getFieldValue("expiryMode")?a("a-form-item",{staticStyle:{position:"relative",left:"12.5%"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deadlineType",{initialValue:"days"}],expression:"['deadlineType', { initialValue: 'days' }]"}],attrs:{options:[{label:"按截止日期",value:"end_date"},{label:"按有效天数",value:"days"}]}}),e._v(" "),"end_date"===e.form.getFieldValue("deadlineType")?a("a-form-item",[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["deadline",{rules:[{validator:e.requiredValidator,message:"请输入截止日期"}]}],expression:"['deadline', {\n            rules: [{ validator: requiredValidator, message: '请输入截止日期' }]\n          }]"}]}),e._v(" "),a("span",{staticClass:"ml2"},[e._v("在此日期前，学员可进行学习。")])],1):a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiryDays",{rules:[{required:!0,message:"请输入有效期天数"}]}],expression:"['expiryDays', {\n            rules: [{ required: true, message: '请输入有效期天数' }]\n          }]"}],staticStyle:{width:"200px"}}),e._v(" "),a("span",{staticClass:"ml2"},[e._v("从加入当天起，在几天内可进行学习。")])],1)],1):e._e(),e._v(" "),"date"===e.form.getFieldValue("expiryMode")?a("a-form-item",{staticStyle:{position:"relative",left:"12.5%",overflow:"hidden"}},[a("a-form-item",{staticClass:"pull-left"},[a("span",{staticClass:"mr2"},[e._v("开始日期")]),e._v(" "),a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiryStartDate",{rules:[{required:!0,message:"请输入开始日期"}]}],expression:"['expiryStartDate', {\n          rules: [{ required: true, message: '请输入开始日期' }]\n        }]"}]})],1),e._v(" "),a("a-form-item",{staticClass:"pull-left ml3"},[a("span",{staticClass:"mr2"},[e._v("结束日期")]),e._v(" "),a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiryEndDate",{rules:[{required:!0,message:"请输入结束日期"}]}],expression:"['expiryEndDate', {\n          rules: [{ required: true, message: '请输入结束日期' }]\n        }]"}]})],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"create-course-btn-group"},[a("a-button",{staticClass:"save-course-btn",attrs:{type:"primary",loading:e.ajaxLoading},on:{click:e.saveCourseSet}},[e._v("创建课程")]),e._v(" "),a("a-button",{on:{click:function(t){return e.goToMultiClassCreatePage()}}},[e._v("取消")])],1),e._v(" "),a("a-modal",{attrs:{visible:e.cropModalVisible},on:{cancel:function(t){e.cropModalVisible=!1,e.courseCoverUrl=""}}},[a("vue-cropper",{ref:"cropper",attrs:{"aspect-ratio":16/9,src:e.courseCoverUrl}}),e._v(" "),a("template",{slot:"footer"},[a("a-button",{on:{click:e.reSelectCourseCover}},[e._v("重新选择")]),e._v(" "),a("a-button",{attrs:{type:"primary",loading:e.uploading},on:{click:e.saveCourseCover}},[e._v("保存图片")])],1)],2)],1)}),[],!1,null,"68ec790d",null);t.default=y.exports}}]);