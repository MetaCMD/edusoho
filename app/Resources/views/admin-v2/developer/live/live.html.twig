{% extends 'admin-v2/layout.html.twig' %}

{#{% set script_controller='jobs/index' %}#}
{% set menu = 'admin_v2_live_activity_data_manage' %}


{% block main %}
  <form id="message-search-form" class="form-inline well well-sm" action="" method="get" novalidate>
    <div class="form-group">
      <input class="form-control" type="text" placeholder="{{'任务名称'|trans}}" name="titleLike" value="{{ app.request.get('titleLike') }}">
    </div>
    <button class="btn btn-primary">{{'form.btn.search'|trans}}</button>
  </form>
  {% if tasks %}
    <table id="job-table" class="table table-striped table-hover">
      <thead>
      <tr>
        <th width="5%">{{'id'|trans}}</th>
        <th width="10%">{{'名称'|trans}}</th>
        <th width="20%">{{'直播时间'|trans}}</th>
        <th width="10%">{{'直播状态'|trans}}</th>
        <th width="10%">{{'回放状态'|trans}}</th>
        <th>{{'admin.crontab_job.operation'|trans}}</th>
      </tr>
      </thead>
      <tbody>
      {% for task in tasks %}
        <tr id="job-table-tr-{{ task.id }}">
          <td>
            {{ task.id }}
          </td>
          <td>
            {{ task.title }}
          </td>
          <td>
            {{ task.startTime|date('Y-m-d H:i:s') }}<br>{{ task.endTime|date('Y-m-d H:i:s') }}
          </td>
          <td>
            {{ activities[task.activityId]['ext']['progressStatus'] }}
          </td>
          <td>
            {{ activities[task.activityId]['ext']['replayStatus'] }}
          </td>
        </tr>
      {% endfor %}
      </tbody>

    </table>
  {% else %}
    <div class="empty">{{'admin.crontab_job.empty_hint'|trans}}</div>
  {% endif %}
  {{ admin_macro.paginator(paginator) }}
{% endblock %}